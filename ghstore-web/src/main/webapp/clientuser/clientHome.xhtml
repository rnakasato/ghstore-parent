<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">
<ui:composition template="/layout/clientLayout.xhtml">
	<ui:define name="head">
		<title>GHStore - Página Principal</title>
		<h:outputStylesheet
			name="homeStyles.css"
			library="css" />
		<h:outputStylesheet
			name="noBorder.css"
			library="css" />
	</ui:define>
	<ui:define name="metadate">
		<f:metadata>
			<f:event
				listener="#{userSessionMB.processOrder()}"
				type="preRenderView" />
			<f:viewParam
				name="idpagseguro"
				value="#{userSessionMB.transactionCode}" />
		</f:metadata>
	</ui:define>
	<ui:define name="content">
		<h:form id="form_content">

			<p:galleria
				id="galGallery"
				value="#{homePageMB.galleryList}"
				var="image"
				panelWidth="872"
				panelHeight="300"
				style="margin-left:35%"
				showCaption="false">
				<p:graphicImage
					style="width:872; height:300"
					value="#{homePageMB.getImagePath(image)}" />
			</p:galleria>


			<p:dataGrid
				var="rec"
				id="recommendedTable"
				value="#{homePageMB.carrier.recommendedProducts}"
				paginator="false"
				selection="#{homePageMB.selectedRecommended}"
				rowKey="#{rec.product.id}"
				rows="1"
				columns="5"
				style="width:100%"
				rendered="#{loginMB.loggedIn}">
				<!--  Trocar para verificar usuário logado -->
				<f:facet
					name="header"
					style="align:left">
				            Recomendações
				        </f:facet>

				<p:panel style="text-align:center">
					<h:panelGrid
						columns="1"
						style="width:100%">
						<p:commandLink actionListener="#{redirectMB.redirectToProductPage(rec.product)}">
							<p:graphicImage
								value="#{homePageMB.getImagePath(rec.product)}"
								style="width:192px;heigth:192" />
							<f:setPropertyActionListener
								value="#{rec.product}"
								target="#{homePageMB.selectedRecommended}" />
						</p:commandLink>
						<p:commandButton
							value="Comprar"
							actionListener="#{redirectMB.redirectToProductPage(rec.product)}" />

						<h:outputText value="#{rec.product.name}" />
						<h:outputText
							rendered="#{empty rec.product.activePromotion}"
							value="#{formatterMB.formatCurrency(rec.product.price)}" />
						<h:outputText
							rendered="#{not empty rec.product.activePromotion}"
							value="Promoção: - #{formatterMB.formatToPercentage(rec.product.activePromotion.discountPercentage)}" />
						<h:outputText
							rendered="#{not empty rec.product.activePromotion}"
							value="De: #{formatterMB.formatCurrency(rec.product.price)}" />
						<h:outputText
							rendered="#{not empty rec.product.activePromotion}"
							value="Por: #{formatterMB.formatCurrency(rec.product.discountPrice)}" />
						<h:outputText value="#{rec.product.statusDesc}" />
					</h:panelGrid>
				</p:panel>
			</p:dataGrid>

			<p:dataGrid
				var="msd"
				id="mostSoldTable"
				value="#{homePageMB.carrier.mostSold}"
				paginator="false"
				selection="#{homePageMB.selectedMostSold}"
				rowKey="#{msd.product.id}"
				rows="1"
				columns="5"
				style="width:100%">
				<!--  Trocar para verificar usuário logado -->
				<f:facet
					name="header"
					style="align:left">
				            Destaques
				        </f:facet>

				<p:panel style="text-align:center">
					<h:panelGrid
						columns="1"
						style="width:100%">
						<p:commandLink actionListener="#{redirectMB.redirectToProductPage(msd.product)}">
							<p:graphicImage
								value="#{homePageMB.getImagePath(msd.product)}"
								style="width:192px;heigth:192" />
							<f:setPropertyActionListener
								value="#{msd.product}"
								target="#{homePageMB.selectedMostSold}" />
						</p:commandLink>
						<p:commandButton
							value="Comprar"
							actionListener="#{redirectMB.redirectToProductPage(msd.product)}" />

						<h:outputText value="#{msd.product.name}" />
						<h:outputText
							rendered="#{empty msd.product.activePromotion}"
							value="#{formatterMB.formatCurrency(msd.product.price)}" />
						<h:outputText
							rendered="#{not empty msd.product.activePromotion}"
							value="Promoção: - #{formatterMB.formatToPercentage(msd.product.activePromotion.discountPercentage)}" />
						<h:outputText
							rendered="#{not empty msd.product.activePromotion}"
							value="De: #{formatterMB.formatCurrency(msd.product.price)}" />
						<h:outputText
							rendered="#{not empty msd.product.activePromotion}"
							value="Por: #{formatterMB.formatCurrency(msd.product.discountPrice)}" />
						<h:outputText value="#{msd.product.statusDesc}" />
					</h:panelGrid>
				</p:panel>
			</p:dataGrid>

			<p:dataGrid
				var="prod"
				id="newProductsTable"
				value="#{homePageMB.carrier.newProducts}"
				paginator="false"
				selection="#{homePageMB.selectedProduct}"
				rowKey="#{prod.id}"
				rows="1"
				columns="5"
				style="width:100%">
				<!--  Trocar para verificar usuário logado -->
				<f:facet
					name="header"
					style="align:left">
				            Novidades
				        </f:facet>

				<p:panel style="text-align:center">
					<h:panelGrid
						columns="1"
						style="width:100%">
						<p:commandLink actionListener="#{redirectMB.redirectToProductPage(prod)}">
							<p:graphicImage
								value="#{homePageMB.getImagePath(prod)}"
								style="width:192px;heigth:192" />
							<f:setPropertyActionListener
								value="#{prod}"
								target="#{homePageMB.selectedProduct}" />
						</p:commandLink>
						<p:commandButton
							value="Comprar"
							actionListener="#{redirectMB.redirectToProductPage(prod)}" />

						<h:outputText value="#{prod.name}" />
						<h:outputText
							rendered="#{empty prod.activePromotion}"
							value="#{formatterMB.formatCurrency(prod.price)}" />
						<h:outputText
							rendered="#{not empty prod.activePromotion}"
							value="Promoção: - #{formatterMB.formatToPercentage(prod.activePromotion.discountPercentage)}" />
						<h:outputText
							rendered="#{not empty prod.activePromotion}"
							value="De: #{formatterMB.formatCurrency(prod.price)}" />
						<h:outputText
							rendered="#{not empty prod.activePromotion}"
							value="Por: #{formatterMB.formatCurrency(prod.discountPrice)}" />
						<h:outputText value="#{prod.statusDesc}" />
					</h:panelGrid>
				</p:panel>
			</p:dataGrid>


		</h:form>
	</ui:define>
</ui:composition>
</html>