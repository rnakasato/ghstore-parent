<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html 	xmlns="http://www.w3.org/1999/xhtml"
		xmlns:h="http://xmlns.jcp.org/jsf/html"
		xmlns:f="http://java.sun.com/jsf/core"
		xmlns:ui="http://java.sun.com/jsf/facelets"
		xmlns:p="http://primefaces.org/ui"
		xmlns:pe="http://primefaces.org/ui/extensions">
	<ui:composition template="/layout/clientLayout.xhtml">
		<ui:define name="content">
			<h:form id="form_content">
					<p:dataTable var="cartItem" 
								id="shoppingCartTable" 
								value="#{userSessionMB.cart.shoppingCartList}"
								paginator="true"
								rows="15"	
								style="width:100%">
							
						<p:column headerText="Nome">
    						<!-- row record -->
    						<h:outputText value="#{cartItem.product.name}"/>
		    			</p:column>
		    			
		    			<p:column headerText="Status">
    						<!-- row record -->
    						<h:outputText value="#{cartItem.product.statusDesc}"/>
		    			</p:column>
		    					    			
		    			<p:column headerText="Preço unitário">
    						<!-- row record -->
    						<h:outputText value="#{formatterMB.formatCurrency(cartItem.product.price)}"/>
		    			</p:column>
						
						<p:column headerText="Quantidade">
    						<!-- row record -->
    						<h:outputText value="#{cartItem.amount}"/>
		    			</p:column>
		    			
		    			<p:column headerText="Total do produto">
    						<!-- row record -->
    						<h:outputText value="#{formatterMB.formatCurrency(cartItem.totalValue)}"/>
		    			</p:column>
		    			
					</p:dataTable>
					
					<p:panelGrid columns="2">
						<p:outputLabel value="Total da compra: "/>
						<p:outputLabel value="#{formatterMB.formatCurrency(userSessionMB.cart.totalValue)}"/>
						
						<p:outputLabel value="Frete: "/>
						<p:outputLabel value="#{formatterMB.formatCurrency(paymentMB.getShippingCost(userSessionMB.cart))}"/>
						
						<p:outputLabel value="Total da compra + Frete"/>
						<p:outputLabel value="#{formatterMB.formatCurrency(paymentMB.getTotalPayment(userSessionMB.cart))}"/>
						
					</p:panelGrid>
					<p:outputLabel />
					<p:commandButton value="Finalizar Compra" actionListener="#{userSessionMB.finishPayment()}"/>
                    <p:confirmDialog severity="alert"
							 global="true" 
							 widgetVar="dialog">  
					     <p:commandButton id="save"	value="Sim" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />			                                
					     <p:commandButton id="ignore"  value="Não"  type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close"/>
					</p:confirmDialog>
			</h:form>	
			
		</ui:define>
	</ui:composition>
</html>